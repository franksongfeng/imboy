
# 功能计划

## 第一版本

具体功能参考： https://gitee.com/imboy-pub/imboy-flutter/blob/main/doc/feature_0.1.0_tree.md

## 第二版本
计划添加群聊相关功能

## 第三版本

用户登录获取token 刷新token功能； OK
单聊表情、文本信息（发送接收）功能 OK
移动好友分组功能；OK
好友列表OK
好友搜索功能 OK
修改个性签名 OK
修改好友备注 OK

重命名分组功能 OK
删除分组功能（删除分组，下面的好友移到默认分组） OK
添加分组功能 OK

添加“切换在线状态”功能；OK
“在线状态”变更后，通知用户加入群的在线用户（异步消息）
"在其他地方上线"通知；OK
聊天中自动刷新token修正；OK
非好友关系不允许聊天 OK

申请添加好友
添加好友确认功能（接受、拒绝、）
删除好友 OK
按条件搜索添加好友
屏蔽此人消息
消息盒子功能

查看好友资料
设置用户头像
修改个人信息
查看好友聊天记录

创建群
按条件查找群
申请加入群
审核申请加入群
管理我的群组拉人
管理我的群组踢人
管理我的群组设置管理员
管理我的群组 解散群（拥有者才有权限）

群消息发送接受 OK
群聊天记录
群成员列表 OK
群成员是否在线显示分组


置顶群、置顶好友（下一期）
表情包上传收藏功能（下一期）
用户可以自行设置是否接受陌生人聊天（下一期）
拉黑好友（下一期）
单聊语音发送接收 功能（下一期）
用户举报功能（下一期）
账号封号、冻结功能（下一期）
单聊图片、附件（发送接收）功能（下一期）(前端控制)
消息逐条转发功能（下一期）(前端控制)
消息合并转发功能（下一期）(前端控制)
消息免打扰（下一期）(前端控制)


# 其他

移动弱网络优化方法总结 http://www.52im.net/thread-1588-1-1.html

* 控制传输包的大小在1400字节以下
    设定1400这个阈值，目的是减少往复，提高效能。

* 放大TCP拥塞窗口

* 调大SOCKET读写缓冲区
    把SOCKET的读缓冲区（亦可称为发送缓冲区）和写缓冲区（亦可称为接收缓冲区）大小设置为64KB。

* 调大RTO（Retransmission TimeOut）初始值
    将RTO（Retransmission TimeOut）初始值设为3s。
    RTO初始值设为3s，这也是目前Linux Kernel版本中TCP/IP协议栈的缺省值

* 禁用TCP快速回收
    TCP快速回收是一种链接资源快速回收和重用的机制，当TCP链接进入到TIME_WAIT状态时，通常需要等待2MSL的时长，但是一旦启用TCP快速回收，则只需等待一个重传时间（RTO）后就能够快速的释放这个链接，以被重新使用。

* HTTP协议：打开SOCKET的TCP_NODELAY选项
    TCP/IP协议栈为了提升传输效率，避免大量小的数据报文在网络中流窜造成拥塞

* 退化长链接：
    即用户在前台使用时，保持一个长链接链路，活跃时通过用户使用驱动网络IO保持链路可用；静默时通过设置HTTP Keep-Alive方式，亦或通过私有协议心跳方式来保持链路。一旦应用切换后台，且在5~10分钟内没有网络交互任务则自行关闭链路，这样在用户交互体验和资源消耗方面取得一个平衡点；

* 及时反馈
    透明和尊重，会带来信任和默契，家庭如此、团队如此、用户亦如此。欲盖弥彰和装傻充愣也许短暂取巧，拉长时间轴来看，肯定要付出惨重的代价。及时和真诚的告知状况，赢得谅解和信任，小付出，大回报，试过都知道。
